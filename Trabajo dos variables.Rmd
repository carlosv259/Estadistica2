---
title: "20175508"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
library(htmltab)
library(stringr)
library(readr)
library(rio)


link='https://github.com/owid/owid-datasets/raw/master/datasets/Conflict%20and%20Terrorism%20deaths%20-%20OWID%20based%20on%20IHME%20%26%20GTD/Conflict%20and%20Terrorism%20deaths%20-%20OWID%20based%20on%20IHME%20%26%20GTD.csv'
conflicto=import(link)

link2='https://github.com/owid/owid-datasets/raw/master/datasets/Terrorism%20incidents%2C%20fatalities%20%26%20injuries%20(Global%20Terrorism%20Database%2C%202018)/Terrorism%20incidents%2C%20fatalities%20%26%20injuries%20(Global%20Terrorism%20Database%2C%202018).csv'
terrorismo=import(link2)

conflicto[,c(3,5,6)]=NULL
terrorismo[,c(4,5,6,7,8,9,10,11,12,13,14)]=NULL

names(conflicto)=c("Pais","Anio","PorConflicto")
names(terrorismo)=c("Pais","Anio","PorAtentado")

?grep
conflicto[grep("1990|1991|1992|1993|1994|1995|1996|1997|1998|1999|2000|2001|2002|2003|2004|2005|2006|2007|2008|2009|2010|2011|2012|2013|2014|2015",conflicto$Anio),]
conflicto=conflicto[-grep("1990|1991|1992|1993|1994|1995|1996|1997|1998|1999|2000|2001|2002|2003|2004|2005|2006|2007|2008|2009|2010|2011|2012|2013|2014|2015",conflicto$Anio),]
conflicto[,c(2)]=NULL

terrorismo=terrorismo[-grep("1970|1971|1972|1973|1974|1975|1976|1977|1978|1979|1980|1981|1982|1983|1984|1985|1986|1987|1988|1989|1990|1991|1992|1993|1994|1995|1996|1997|1998|1999|2000|2001|2002|2003|2004|2005|2006|2007|2008|2009|2010|2011|2012|2013|2014|2015|2017",terrorismo$Anio),]
terrorismo[,c(2)]=NULL

terrorismo$PorAtentado=as.numeric(terrorismo$PorAtentado)
conflicto$PorConflicto=as.numeric(conflicto$PorConflicto)
total1=merge(terrorismo,conflicto,by.x='Pais', by.y='Pais') 

total1[grep("World",total1$Pais),]
total1=total1[-grep("World",total1$Pais),]
total2[is.na(total2)] <- 0
total2[grep("World|West|East|Oceania|&|Asia|South America|Sub|North America",total2$Pais),]
total2=total2[-grep("World|West|East|Oceania|&|Asia|South America|Sub|North America",total2$Pais),]
total2[duplicated(total2$Pais),]
write.csv(total2,file="Muertes.csv",row.names=FALSE)
```
